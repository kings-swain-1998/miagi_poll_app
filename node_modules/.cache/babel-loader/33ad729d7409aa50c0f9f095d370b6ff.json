{"ast":null,"code":"var _jsxFileName = \"D:\\\\tranning2\\\\src\\\\component\\\\poll_detail\\\\index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Axios from \"axios\";\nimport \"./style.scss\";\nDetail.propTypes = {};\n\nfunction Detail(props) {\n  const [item, setItem] = useState();\n  const [show, setShow] = useState(false);\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    const id = props.match.match.params.id;\n\n    async function fetchDetailPoll() {\n      const data = await Axios.get(`https://dev.miagi-so.net/api/v1/poll/${id}/show`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(res => {\n        return res.data;\n      }).catch(err => console.log(err));\n      setItem(data);\n    }\n\n    fetchDetailPoll();\n  }, []);\n\n  const showUserPollAnswer = poll_item => {\n    if (poll_item.poll_answer.length > 0) {\n      return poll_item.poll_answer.map(poll_answer_item => {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36,\n            columnNumber: 16\n          }\n        }, poll_answer_item.user.display_name);\n      });\n    }\n  };\n\n  const handleClassAnswer = i => {\n    if (i === show) {\n      return `detail__question-answer--show detail__question-answer--${i}`;\n    } else {\n      return \"detail__question-answer\";\n    }\n  };\n\n  const setShowAnswer = i => {\n    setShow(i);\n\n    if (show === i) {\n      setShow(-1);\n    }\n  };\n\n  const rotateIcon = i => {\n    if (i === show) {\n      return \"detail__question-icon--active\";\n    }\n  };\n\n  const showPollQuestion = poll_question => {\n    let index = 0;\n    const total_poll_answer = poll_question.map(a => {\n      return index += a.poll_answer.length;\n    });\n    return poll_question.map((poll_item, i) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: i,\n        className: \"detail__question-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"detail__question-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }\n      }, poll_item.content), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"detail__question-number\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }\n      }, poll_item.poll_answer.length > 0 ? Math.round(poll_item.poll_answer.length / index * 100 * 100) / 100 : 0, \"%\"), /*#__PURE__*/React.createElement(\"i\", {\n        className: `fa fa-angle-right detail__question-icon ${rotateIcon(i)}`,\n        \"aria-hidden\": \"true\",\n        onClick: () => setShowAnswer(i),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: `detail__question-answer ${handleClassAnswer(i)}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }\n      }, showUserPollAnswer(poll_item)));\n    });\n  };\n\n  const showItem = () => {\n    if (item) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"detail__main\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"detail__main-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }\n      }, item.content), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"detail__question\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }\n      }, showPollQuestion(item.poll_question)));\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 10\n    }\n  }, showItem());\n}\n\nexport default Detail;","map":{"version":3,"sources":["D:/tranning2/src/component/poll_detail/index.js"],"names":["React","useEffect","useState","PropTypes","Axios","Detail","propTypes","props","item","setItem","show","setShow","token","localStorage","getItem","id","match","params","fetchDetailPoll","data","get","headers","Authorization","then","res","catch","err","console","log","showUserPollAnswer","poll_item","poll_answer","length","map","poll_answer_item","user","display_name","handleClassAnswer","i","setShowAnswer","rotateIcon","showPollQuestion","poll_question","index","total_poll_answer","a","content","Math","round","showItem"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Axios from \"axios\";\r\nimport \"./style.scss\";\r\n\r\nDetail.propTypes = {};\r\n\r\nfunction Detail(props) {\r\n  const [item, setItem] = useState();\r\n  const [show, setShow] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    const id = props.match.match.params.id;\r\n    async function fetchDetailPoll() {\r\n      const data = await Axios.get(\r\n        `https://dev.miagi-so.net/api/v1/poll/${id}/show`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      )\r\n        .then((res) => {\r\n          return res.data;\r\n        })\r\n        .catch((err) => console.log(err));\r\n      setItem(data);\r\n    }\r\n    fetchDetailPoll();\r\n  }, []);\r\n\r\n  const showUserPollAnswer = (poll_item) => {\r\n    if (poll_item.poll_answer.length > 0) {\r\n      return poll_item.poll_answer.map((poll_answer_item) => {\r\n        return <p>{poll_answer_item.user.display_name}</p>;\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleClassAnswer = (i) => {\r\n    if (i === show) {\r\n      return `detail__question-answer--show detail__question-answer--${i}`;\r\n    } else {\r\n      return \"detail__question-answer\";\r\n    }\r\n  };\r\n\r\n  const setShowAnswer = (i) => {\r\n    setShow(i);\r\n    if (show === i) {\r\n      setShow(-1);\r\n    }\r\n  };\r\n  const rotateIcon = (i) => {\r\n    if (i === show) {\r\n      return \"detail__question-icon--active\";\r\n    }\r\n  };\r\n\r\n  const showPollQuestion = (poll_question) => {\r\n    let index = 0;\r\n    const total_poll_answer = poll_question.map((a) => {\r\n      return (index += a.poll_answer.length);\r\n    });\r\n\r\n    return poll_question.map((poll_item, i) => {\r\n      return (\r\n        <div key={i} className=\"detail__question-item\">\r\n          <p className=\"detail__question-title\">{poll_item.content}</p>\r\n          <p className=\"detail__question-number\">\r\n            {poll_item.poll_answer.length > 0\r\n              ? Math.round((poll_item.poll_answer.length / index) * 100 * 100) /\r\n                100\r\n              : 0}\r\n            %\r\n          </p>\r\n          <i\r\n            className={`fa fa-angle-right detail__question-icon ${rotateIcon(\r\n              i\r\n            )}`}\r\n            aria-hidden=\"true\"\r\n            onClick={() => setShowAnswer(i)}\r\n          ></i>\r\n          <div className={`detail__question-answer ${handleClassAnswer(i)}`}>\r\n            {showUserPollAnswer(poll_item)}\r\n          </div>\r\n        </div>\r\n      );\r\n    });\r\n  };\r\n\r\n  const showItem = () => {\r\n    if (item) {\r\n      return (\r\n        <div className=\"detail__main\">\r\n          <p className=\"detail__main-title\">{item.content}</p>\r\n          <div className=\"detail__question\">\r\n            {showPollQuestion(item.poll_question)}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n  return <div className=\"detail\">{showItem()}</div>;\r\n}\r\n\r\nexport default Detail;\r\n"]},"metadata":{},"sourceType":"module"}