{"ast":null,"code":"import Axios from \"axios\";\nimport * as Types from \"../constant/index\"; // login\n\nexport const acLoginRq = data => {\n  return dispatch => {\n    Axios.post(\"https://dev.miagi-so.net/api/v1/login\", data).then(res => {\n      localStorage.setItem(\"token\", res.data.data.token);\n      localStorage.setItem(\"userId\", res.data.data.user.id);\n      localStorage.setItem(\"userName\", res.data.data.user.display_name);\n      window.location.reload();\n      return dispatch(acLogin(res.data));\n    }).catch(err => console.log(err));\n  };\n};\nexport const acLogin = data => {\n  return {\n    type: Types.LOGIN_SUCCES,\n    payload: data.data\n  };\n};\nexport const acLogoutRq = () => {\n  localStorage.clear();\n  return {\n    type: Types.LOGIN_FAIL\n  };\n}; // get poll\n\nexport const getPollRq = () => {\n  const token = localStorage.getItem(\"token\");\n  return dispatch => {\n    Axios.get(\"https://dev.miagi-so.net/api/v1/poll\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      dispatch(acLogged());\n      dispatch(getPoll(res.data));\n      return dispatch(loadingSucces());\n    }).catch(err => {\n      console.log(err);\n      dispatch(acLogoutRq());\n    });\n  };\n};\nexport const getPoll = data => {\n  return {\n    type: Types.GET_DATA_SUCCES,\n    payload: data\n  };\n};\nexport const acLogged = () => {\n  return {\n    type: Types.LOGGED_IN\n  };\n}; // add poll\n\nexport const acAddPollRq = (data, dataLocal) => {\n  const token = localStorage.getItem(\"token\");\n  return dispatch => {\n    Axios.post(\"https://dev.miagi-so.net/api/v1/poll/store\", data, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      return dispatch(loadingSucces());\n    }).catch(err => {\n      return dispatch(loadingSucces());\n    });\n  };\n};\nexport const acAddPoll = data => {\n  return {\n    type: Types.ADD_POLL_SUCCES,\n    payload: data\n  };\n}; // get item show poll\n\nexport const acGetItemPoll = id => {\n  const token = localStorage.getItem(\"token\");\n  return dispatch => {\n    Axios.get(`https://dev.miagi-so.net/api/v1/poll/${id}/show`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      dispatch(getItemPoll(res.data));\n      return dispatch(loadingSucces());\n    }).catch(err => console.log(err));\n  };\n};\nexport const getItemPoll = data => {\n  return {\n    type: Types.GET_POLL_ITEM_SUCCES,\n    payload: data\n  };\n}; // add item question poll\n\nexport const addItemQuestionLocal = (id, data) => {\n  return {\n    type: Types.ADD_POLL_ITEM_SUCCES,\n    payload: data,\n    id: id\n  };\n};\nexport const addItemQuestionServer = (id, data) => {\n  const token = localStorage.getItem(\"token\");\n  return dispatch => {\n    Axios.patch(`https://dev.miagi-so.net/api/v1/poll/${id}/update`, data, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      dispatch(loadingSucces());\n      dispatch(addItemQuestionLocal(id, data));\n    }).catch(err => console.log(err));\n  };\n}; //  remove question item\n\nexport const removeItemQuestionLocal = data => {\n  return {\n    type: Types.REMOVE_POLL_ITEM_SUCCES,\n    payload: data\n  };\n}; // edit question\n\nexport const editQuestionRq = (data, id) => {\n  return {\n    type: Types.EDIT_QUESTION,\n    payload: {\n      data: data,\n      id: id\n    }\n  };\n}; // loading\n\nexport const loadingSucces = () => {\n  return {\n    type: Types.LOADING_SUCCES,\n    payload: true\n  };\n};\nexport const loadingFail = () => {\n  return {\n    type: Types.LOADING_FAIL,\n    payload: false\n  };\n}; // delete\n\nexport const deleteQuestion = id => {\n  return {\n    type: Types.DELETE_SUCCES,\n    payload: id\n  };\n};","map":{"version":3,"sources":["D:/tranning2/src/redux/action/index.js"],"names":["Axios","Types","acLoginRq","data","dispatch","post","then","res","localStorage","setItem","token","user","id","display_name","window","location","reload","acLogin","catch","err","console","log","type","LOGIN_SUCCES","payload","acLogoutRq","clear","LOGIN_FAIL","getPollRq","getItem","get","headers","Authorization","acLogged","getPoll","loadingSucces","GET_DATA_SUCCES","LOGGED_IN","acAddPollRq","dataLocal","acAddPoll","ADD_POLL_SUCCES","acGetItemPoll","getItemPoll","GET_POLL_ITEM_SUCCES","addItemQuestionLocal","ADD_POLL_ITEM_SUCCES","addItemQuestionServer","patch","removeItemQuestionLocal","REMOVE_POLL_ITEM_SUCCES","editQuestionRq","EDIT_QUESTION","LOADING_SUCCES","loadingFail","LOADING_FAIL","deleteQuestion","DELETE_SUCCES"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,KAAZ,MAAuB,mBAAvB,C,CAEA;;AAEA,OAAO,MAAMC,SAAS,GAAIC,IAAD,IAAU;AACjC,SAAQC,QAAD,IAAc;AACnBJ,IAAAA,KAAK,CAACK,IAAN,CAAW,uCAAX,EAAoDF,IAApD,EACGG,IADH,CACSC,GAAD,IAAS;AACbC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,GAAG,CAACJ,IAAJ,CAASA,IAAT,CAAcO,KAA5C;AACAF,MAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BF,GAAG,CAACJ,IAAJ,CAASA,IAAT,CAAcQ,IAAd,CAAmBC,EAAlD;AACAJ,MAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCF,GAAG,CAACJ,IAAJ,CAASA,IAAT,CAAcQ,IAAd,CAAmBE,YAApD;AACAC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACA,aAAOZ,QAAQ,CAACa,OAAO,CAACV,GAAG,CAACJ,IAAL,CAAR,CAAf;AACD,KAPH,EAQGe,KARH,CAQUC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CARlB;AASD,GAVD;AAWD,CAZM;AAcP,OAAO,MAAMF,OAAO,GAAId,IAAD,IAAU;AAC/B,SAAO;AACLmB,IAAAA,IAAI,EAAErB,KAAK,CAACsB,YADP;AAELC,IAAAA,OAAO,EAAErB,IAAI,CAACA;AAFT,GAAP;AAID,CALM;AAOP,OAAO,MAAMsB,UAAU,GAAG,MAAM;AAC9BjB,EAAAA,YAAY,CAACkB,KAAb;AACA,SAAO;AACLJ,IAAAA,IAAI,EAAErB,KAAK,CAAC0B;AADP,GAAP;AAGD,CALM,C,CAMP;;AAEA,OAAO,MAAMC,SAAS,GAAG,MAAM;AAC7B,QAAMlB,KAAK,GAAGF,YAAY,CAACqB,OAAb,CAAqB,OAArB,CAAd;AACA,SAAQzB,QAAD,IAAc;AACnBJ,IAAAA,KAAK,CAAC8B,GAAN,CAAU,sCAAV,EAAkD;AAChDC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,UAAStB,KAAM;AADxB;AADuC,KAAlD,EAKGJ,IALH,CAKSC,GAAD,IAAS;AACbH,MAAAA,QAAQ,CAAC6B,QAAQ,EAAT,CAAR;AACA7B,MAAAA,QAAQ,CAAC8B,OAAO,CAAC3B,GAAG,CAACJ,IAAL,CAAR,CAAR;AACA,aAAOC,QAAQ,CAAC+B,aAAa,EAAd,CAAf;AACD,KATH,EAUGjB,KAVH,CAUUC,GAAD,IAAS;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAf,MAAAA,QAAQ,CAACqB,UAAU,EAAX,CAAR;AACD,KAbH;AAcD,GAfD;AAgBD,CAlBM;AAoBP,OAAO,MAAMS,OAAO,GAAI/B,IAAD,IAAU;AAC/B,SAAO;AACLmB,IAAAA,IAAI,EAAErB,KAAK,CAACmC,eADP;AAELZ,IAAAA,OAAO,EAAErB;AAFJ,GAAP;AAID,CALM;AAOP,OAAO,MAAM8B,QAAQ,GAAG,MAAM;AAC5B,SAAO;AACLX,IAAAA,IAAI,EAAErB,KAAK,CAACoC;AADP,GAAP;AAGD,CAJM,C,CAMP;;AAEA,OAAO,MAAMC,WAAW,GAAG,CAACnC,IAAD,EAAOoC,SAAP,KAAqB;AAC9C,QAAM7B,KAAK,GAAGF,YAAY,CAACqB,OAAb,CAAqB,OAArB,CAAd;AACA,SAAQzB,QAAD,IAAc;AACnBJ,IAAAA,KAAK,CAACK,IAAN,CAAW,4CAAX,EAAyDF,IAAzD,EAA+D;AAC7D4B,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,UAAStB,KAAM;AADxB;AADoD,KAA/D,EAKGJ,IALH,CAKSC,GAAD,IAAS;AACb,aAAOH,QAAQ,CAAC+B,aAAa,EAAd,CAAf;AACD,KAPH,EAQGjB,KARH,CAQUC,GAAD,IAAS;AACd,aAAOf,QAAQ,CAAC+B,aAAa,EAAd,CAAf;AACD,KAVH;AAWD,GAZD;AAaD,CAfM;AAiBP,OAAO,MAAMK,SAAS,GAAIrC,IAAD,IAAU;AACjC,SAAO;AACLmB,IAAAA,IAAI,EAAErB,KAAK,CAACwC,eADP;AAELjB,IAAAA,OAAO,EAAErB;AAFJ,GAAP;AAID,CALM,C,CAOP;;AAEA,OAAO,MAAMuC,aAAa,GAAI9B,EAAD,IAAQ;AACnC,QAAMF,KAAK,GAAGF,YAAY,CAACqB,OAAb,CAAqB,OAArB,CAAd;AACA,SAAQzB,QAAD,IAAc;AACnBJ,IAAAA,KAAK,CAAC8B,GAAN,CAAW,wCAAuClB,EAAG,OAArD,EAA6D;AAC3DmB,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,UAAStB,KAAM;AADxB;AADkD,KAA7D,EAKGJ,IALH,CAKSC,GAAD,IAAS;AACbH,MAAAA,QAAQ,CAACuC,WAAW,CAACpC,GAAG,CAACJ,IAAL,CAAZ,CAAR;AACA,aAAOC,QAAQ,CAAC+B,aAAa,EAAd,CAAf;AACD,KARH,EASGjB,KATH,CASUC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CATlB;AAUD,GAXD;AAYD,CAdM;AAgBP,OAAO,MAAMwB,WAAW,GAAIxC,IAAD,IAAU;AACnC,SAAO;AACLmB,IAAAA,IAAI,EAAErB,KAAK,CAAC2C,oBADP;AAELpB,IAAAA,OAAO,EAAErB;AAFJ,GAAP;AAID,CALM,C,CAOP;;AAEA,OAAO,MAAM0C,oBAAoB,GAAG,CAACjC,EAAD,EAAKT,IAAL,KAAc;AAChD,SAAO;AACLmB,IAAAA,IAAI,EAAErB,KAAK,CAAC6C,oBADP;AAELtB,IAAAA,OAAO,EAAErB,IAFJ;AAGLS,IAAAA,EAAE,EAAEA;AAHC,GAAP;AAKD,CANM;AAQP,OAAO,MAAMmC,qBAAqB,GAAG,CAACnC,EAAD,EAAKT,IAAL,KAAc;AACjD,QAAMO,KAAK,GAAGF,YAAY,CAACqB,OAAb,CAAqB,OAArB,CAAd;AACA,SAAQzB,QAAD,IAAc;AACnBJ,IAAAA,KAAK,CAACgD,KAAN,CAAa,wCAAuCpC,EAAG,SAAvD,EAAiET,IAAjE,EAAuE;AACrE4B,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,UAAStB,KAAM;AADxB;AAD4D,KAAvE,EAKGJ,IALH,CAKSC,GAAD,IAAS;AACbH,MAAAA,QAAQ,CAAC+B,aAAa,EAAd,CAAR;AACA/B,MAAAA,QAAQ,CAACyC,oBAAoB,CAACjC,EAAD,EAAKT,IAAL,CAArB,CAAR;AACD,KARH,EASGe,KATH,CASUC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CATlB;AAUD,GAXD;AAYD,CAdM,C,CAgBP;;AAEA,OAAO,MAAM8B,uBAAuB,GAAI9C,IAAD,IAAU;AAC/C,SAAO;AACLmB,IAAAA,IAAI,EAAErB,KAAK,CAACiD,uBADP;AAEL1B,IAAAA,OAAO,EAAErB;AAFJ,GAAP;AAID,CALM,C,CAOP;;AAEA,OAAO,MAAMgD,cAAc,GAAG,CAAChD,IAAD,EAAOS,EAAP,KAAc;AAC1C,SAAO;AACLU,IAAAA,IAAI,EAAErB,KAAK,CAACmD,aADP;AAEL5B,IAAAA,OAAO,EAAE;AACPrB,MAAAA,IAAI,EAAEA,IADC;AAEPS,MAAAA,EAAE,EAAEA;AAFG;AAFJ,GAAP;AAOD,CARM,C,CAUP;;AACA,OAAO,MAAMuB,aAAa,GAAG,MAAM;AACjC,SAAO;AACLb,IAAAA,IAAI,EAAErB,KAAK,CAACoD,cADP;AAEL7B,IAAAA,OAAO,EAAE;AAFJ,GAAP;AAID,CALM;AAOP,OAAO,MAAM8B,WAAW,GAAG,MAAM;AAC/B,SAAO;AACLhC,IAAAA,IAAI,EAAErB,KAAK,CAACsD,YADP;AAEL/B,IAAAA,OAAO,EAAE;AAFJ,GAAP;AAID,CALM,C,CAOP;;AAEA,OAAO,MAAMgC,cAAc,GAAI5C,EAAD,IAAQ;AACpC,SAAO;AACLU,IAAAA,IAAI,EAAErB,KAAK,CAACwD,aADP;AAELjC,IAAAA,OAAO,EAAEZ;AAFJ,GAAP;AAID,CALM","sourcesContent":["import Axios from \"axios\";\r\nimport * as Types from \"../constant/index\";\r\n\r\n// login\r\n\r\nexport const acLoginRq = (data) => {\r\n  return (dispatch) => {\r\n    Axios.post(\"https://dev.miagi-so.net/api/v1/login\", data)\r\n      .then((res) => {\r\n        localStorage.setItem(\"token\", res.data.data.token);\r\n        localStorage.setItem(\"userId\", res.data.data.user.id);\r\n        localStorage.setItem(\"userName\", res.data.data.user.display_name);\r\n        window.location.reload();\r\n        return dispatch(acLogin(res.data));\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const acLogin = (data) => {\r\n  return {\r\n    type: Types.LOGIN_SUCCES,\r\n    payload: data.data,\r\n  };\r\n};\r\n\r\nexport const acLogoutRq = () => {\r\n  localStorage.clear();\r\n  return {\r\n    type: Types.LOGIN_FAIL,\r\n  };\r\n};\r\n// get poll\r\n\r\nexport const getPollRq = () => {\r\n  const token = localStorage.getItem(\"token\");\r\n  return (dispatch) => {\r\n    Axios.get(\"https://dev.miagi-so.net/api/v1/poll\", {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        dispatch(acLogged());\r\n        dispatch(getPoll(res.data));\r\n        return dispatch(loadingSucces());\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        dispatch(acLogoutRq());\r\n      });\r\n  };\r\n};\r\n\r\nexport const getPoll = (data) => {\r\n  return {\r\n    type: Types.GET_DATA_SUCCES,\r\n    payload: data,\r\n  };\r\n};\r\n\r\nexport const acLogged = () => {\r\n  return {\r\n    type: Types.LOGGED_IN,\r\n  };\r\n};\r\n\r\n// add poll\r\n\r\nexport const acAddPollRq = (data, dataLocal) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  return (dispatch) => {\r\n    Axios.post(\"https://dev.miagi-so.net/api/v1/poll/store\", data, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        return dispatch(loadingSucces());\r\n      })\r\n      .catch((err) => {\r\n        return dispatch(loadingSucces());\r\n      });\r\n  };\r\n};\r\n\r\nexport const acAddPoll = (data) => {\r\n  return {\r\n    type: Types.ADD_POLL_SUCCES,\r\n    payload: data,\r\n  };\r\n};\r\n\r\n// get item show poll\r\n\r\nexport const acGetItemPoll = (id) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  return (dispatch) => {\r\n    Axios.get(`https://dev.miagi-so.net/api/v1/poll/${id}/show`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        dispatch(getItemPoll(res.data));\r\n        return dispatch(loadingSucces());\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\nexport const getItemPoll = (data) => {\r\n  return {\r\n    type: Types.GET_POLL_ITEM_SUCCES,\r\n    payload: data,\r\n  };\r\n};\r\n\r\n// add item question poll\r\n\r\nexport const addItemQuestionLocal = (id, data) => {\r\n  return {\r\n    type: Types.ADD_POLL_ITEM_SUCCES,\r\n    payload: data,\r\n    id: id,\r\n  };\r\n};\r\n\r\nexport const addItemQuestionServer = (id, data) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  return (dispatch) => {\r\n    Axios.patch(`https://dev.miagi-so.net/api/v1/poll/${id}/update`, data, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        dispatch(loadingSucces());\r\n        dispatch(addItemQuestionLocal(id, data));\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n};\r\n\r\n//  remove question item\r\n\r\nexport const removeItemQuestionLocal = (data) => {\r\n  return {\r\n    type: Types.REMOVE_POLL_ITEM_SUCCES,\r\n    payload: data,\r\n  };\r\n};\r\n\r\n// edit question\r\n\r\nexport const editQuestionRq = (data, id) => {\r\n  return {\r\n    type: Types.EDIT_QUESTION,\r\n    payload: {\r\n      data: data,\r\n      id: id,\r\n    },\r\n  };\r\n};\r\n\r\n// loading\r\nexport const loadingSucces = () => {\r\n  return {\r\n    type: Types.LOADING_SUCCES,\r\n    payload: true,\r\n  };\r\n};\r\n\r\nexport const loadingFail = () => {\r\n  return {\r\n    type: Types.LOADING_FAIL,\r\n    payload: false,\r\n  };\r\n};\r\n\r\n// delete\r\n\r\nexport const deleteQuestion = (id) => {\r\n  return {\r\n    type: Types.DELETE_SUCCES,\r\n    payload: id,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}